---
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import Modalcontac from "../components/ui/Modalcontac.astro";
import data from "../data/accessibleTravel.json";
import MensajeApp from "../components/section/MensajeApp.astro";
import "../styles/global.css";
import PortadaStatic from "../components/section/PortadaStatic.astro";
import BlogAside from "../components/ui/BlogAside.astro";
import MainContent from "../components/constructor/MainContent.astro";
import { headerMenu } from "../utils/headerSpa√±ol";
import lenguaje from "../data/locales/es.json";
import dest from "../data/peru/peru-en/travels.json";
const articulos = Object.values(
  await import.meta.glob("/src/pages/es/blog/*.md", { eager: true })
);
const articulo = articulos.slice(0, 3);

const { currentLocale } = Astro;

const destinos = dest.filter((item) => item.recomendado === true).slice(0, 3);

const {lang, title, description, image, date, author, tags, imageAutor, bio } =
  Astro.props.frontmatter;
---

<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>{title} | Accessible Travel Peru</title>
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- SEO b√°sico -->
    <meta name="author" content={author} />
    <meta
      name="keywords"
      content={`turismo accesible, viajes Per√∫, ${title}`}
    />
    <meta name="robots" content="index, follow" />
    {
      title && (
        <link
          rel="canonical"
          href={`https://accessibletravelperu.com/blog/${title
            .toLowerCase()
            .replace(/[^a-z0-9]+/g, "-")}`}
        />
      )
    }

    <!-- Open Graph -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={image ?? "/images/default.webp"} />
    <meta property="og:type" content="article" />
    <meta property="og:locale" content="es_PE" />
    <meta property="article:published_time" content={date} />
    <meta property="article:author" content={author} />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={image ?? "/images/default.webp"} />
  </head>

  <body class="overflow-x-hidden font-poppins bg-white text-slate-800 relative">
    <Header headerMenu={headerMenu} lenguaje={lenguaje} />
    <div class="pt-14 md:pt-22 w-full h-14 md:h-22 bg-white"></div>
    <PortadaStatic url="/images/misti.webp" />

    <MainContent>
      <article
        class="space-y-6 text-base leading-relaxed mx-auto:max-w-7xl gap-4 p-4 flex flex-col-reverse md:flex-row"
      >
        <div
          class="bg-white max-w-md md:py-12 lg:max-w-2xl xl:max-w-4xl rounded-lg overflow-hidden"
        >
          <img
            src={image ?? "/images/gato.jpg"}
            alt={`Imagen destacada de ${title}`}
            class="w-full rounded-lg object-cover h-72"
          />

          <div class="p-6">
            <h1 class="text-2xl font-bold text-gray-900 mb-2">{title}</h1>

            <div class="flex items-center text-gray-500 text-sm space-x-4 mb-4">
              <span>üìÖ {date}</span>
              <span>‚úçÔ∏è {author}</span>
            </div>
            <p class="text-gray-600 mb-4">{description}</p>

            <div class="space-y-2">
              <slot />
            </div>
          </div>
        </div>
        <BlogAside
          data={{
            title,
            description,
            image,
            date,
            author,
            tags,
            imageAutor,

            bio,
          }}
          destinos={destinos}
          news={articulo}
          lenguaje={lenguaje}
        />
      </article>
    </MainContent>

    <Footer headerMenu={headerMenu} lenguaje={lenguaje} />
    <Modalcontac  lenguaje={lenguaje} />
    <button
      id="btn"
      title="Open contact panel"
      class="fixed bottom-5 right-1 md:right-5 z-50 px-2 py-2 rounded-full bg-amber-400 duration-500 flex items-center justify-center"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="h-10 w-10"
        ><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path><path d="M8 12h.01"
        ></path><path d="M12 12h.01"></path><path d="M16 12h.01"></path></svg
      >
    </button>
    
    <MensajeApp data={data} />
  </body>
</html>

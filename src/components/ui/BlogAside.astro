---
const { data, news } = Astro.props;
---

<aside
  class="w-full md:max-w-xs my-12 md:w-80 p-4 space-y-8 h-full bg-white border border-gray-200 rounded-lg shadow-sm"
>
  <!-- Perfil -->
  {
    data.author && (
      <section class="text-center">
        <img
          src="/images/autor.webp"
          alt={data.author.name ?? data.author}
          title={`Foto de ${data.author.name ?? data.author}`}
          class="w-28 h-28 mx-auto rounded-full object-cover border-4 border-gray-200"
        />
        <h2 class="mt-4 text-lg font-bold text-gray-900">
          {data.author.name ?? data.author}
        </h2>
        <p class="text-sm text-gray-500">{data.author.role ?? data.role}</p>
        <p class="mt-3 text-gray-600 text-sm">{data.author.bio ?? data.bio}</p>
        <div class="flex justify-center gap-4 mt-4 text-gray-500">
          {data.author.social?.facebook && (
            <a
              href={data.author.social.facebook}
              aria-label="Facebook"
              class="hover:text-blue-500"
            >
              <i class="fab fa-facebook-f" />
            </a>
          )}
          {data.author.social?.twitter && (
            <a
              href={data.author.social.twitter}
              aria-label="Twitter"
              class="hover:text-sky-500"
            >
              <i class="fab fa-twitter" />
            </a>
          )}
          {data.author.social?.linkedin && (
            <a
              href={data.author.social.linkedin}
              aria-label="LinkedIn"
              class="hover:text-blue-700"
            >
              <i class="fab fa-linkedin-in" />
            </a>
          )}
        </div>
      </section>
    )
  }

  {
    data.tags?.length > 0 && (
      <section>
        <h3 class="font-semibold text-gray-800 mb-3">Tags</h3>
        <div class="flex flex-wrap gap-2">
          {data.tags.map((tag) => (
            <button
              data-tag={tag}
              class="px-3 py-1 rounded-full border border-gray-300 text-sm text-gray-700 hover:bg-gray-200 transition"
            >
              {tag}
            </button>
          ))}
        </div>
      </section>
    )
  }

  <!-- Noticias recientes -->

  <section>
    <h3 class="font-semibold text-gray-800 mb-4">Publicaciones recientes</h3>
    <div class="space-y-4">
      {
        news.slice(0, 3).map((newsa) => (
          <article class="flex gap-4 items-center ">
            <img
              src={newsa.frontmatter.image ?? "/images/default-news.jpg"}
              alt={newsa.frontmatter.title}
              class="w-22 h-full rounded object-cover"
            />
            <div class="w-auto">
              <a
                href={newsa.url}
                class="text-sm font-medium text-gray-800 hover:text-blue-600"
              >
                {newsa.frontmatter.title}
              </a>
              <time class="block text-xs text-gray-500">
                {newsa.frontmatter.date}
              </time>
            </div>
          </article>
        ))
      }
    </div>
  </section>
</aside>
